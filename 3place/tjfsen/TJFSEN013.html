<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="hbaolong@vip.qq.com" />
  <title>统计反思EN:2.1. The garden of forking data</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">统计反思EN:2.1. The garden of forking data</h1>
<p class="author">hbaolong@vip.qq.com</p>
</header>
<center>
<a href="/3place/tjfsen">返回首页</a> <a
href="/3place/tjfsen/mingju.html">本书名句</a> <a
href="/3place/tjfsen/memo.html">本书注解</a> <a
href="/3place/tjfsen/index_rich.html">丰富目录</a> <a
href="/3place/tjfsen/index_readcal.html">同读日历</a> <a
href="/3place/tjfsen/index_timeline.html">时间线</a> <a
href="/3place/tjfsen/index_books.html">引用书籍</a> <a
href="/3place/tjfsen/index_words.html">使用字频</a>
<div id="wx_pic" style="margin:0 auto;display:none;">
<img src='/img/logo.png'/>
</div>
</center>
<h4 id="the-garden-of-forking-data">2.1. The garden of forking data</h4>
<p>Our goal in this section will be to build Bayesian inference up from
humble beginnings, so there is no superstition about it. Bayesian
inference is really just counting and comparing of possibilities.
Consider by analogy Jorge Luis Borges’ short story “The Garden of
Forking Paths.” The story is about a man who encounters a book filled
with contradictions. In most books, characters arrive at plot points and
must decide among alternative paths. A protag- onist may arrive at a
man’s home. She might kill the man, or rather take a cup of tea.
Only</p>
<p>one of these paths is taken—murder or tea. But the book within
Borges’ story explores all paths, with each decision branching outward
into an expanding garden of forking paths.</p>
<p>This is the same device that Bayesian inference offers. In order to
make good inference about what actually happened, it helps to consider
everything that could have happened. A Bayesian analysis is a garden of
forking data, in which alternative sequences of events are cultivated.
As we learn about what did happen, some of these alternative sequences
are pruned. In the end, what remains is only what is logically
consistent with our knowledge.</p>
<p>This approach provides a quantitative ranking of hypotheses, a
ranking that is maximally conservative, given the assumptions and data
that go into it. The approach cannot guarantee a correct answer, on
large world terms. But it can guarantee the best possible answer, on
small world terms, that could be derived from the information fed into
it.</p>
<p>Consider the following toy example.</p>
<p>2.1.1. Counting possibilities. Suppose there’s a bag, and it contains
four marbles. These marbles come in two colors: blue and white. We know
there are four marbles in the bag, but we don’t know how many are of
each color. We do know that there are five possibilities:</p>
<ol type="1">
<li>[oooo], (2) [oooo], (3) [oooo], (4) [oooo], (5) [oooo]. These are
the only possibilities consistent with what we know about the contents
of the bag. Call these five possibilities the conjectures.</li>
</ol>
<p>Our goal is to figure out which of these conjectures is most
plausible, given some evi- dence about the contents ofthe bag. We do
have some evidence: A sequence of three mar- bles is pulled from the
bag, one at a time, replacing the marble each time and shaking the bag
before drawing another marble. The sequence that emerges is: ooo, in
that order. These are the data.</p>
<p>So now let’s plant the garden and see how to use the data to infer
what’s in the bag. Let’s begin by considering just the single
conjecture, [oooo], that the bag contains one blue and three white
marbles. On the first draw from the bag, one of four things could
happen, corresponding to one of four marbles in the bag. So we can
visualize the possibilities branching outward:</p>
<p>Notice that even though the three white marbles look the same from a
data perspective— we just record the color of the marbles, after
all—they are really different events. This is important, because it
means that there are three more ways to see than to see .</p>
<p>Now consider the garden as we get another draw from the bag. It
expands the garden out one layer:</p>
<p>Now there are 16 possible paths through the garden, one for each pair
of draws. On the second draw from the bag, each of the paths above again
forks into four possible paths. Why?</p>
<p>Figure 2.2. The 64 possible paths generated by assuming the bag
contains one blue and three white marbles.</p>
<p>Because we believe that our shaking of the bag gives each marble a
fair chance at being drawn, regardless of which marble was drawn
previously. The third layer is built in the same way, and the full
garden is shown in Figure 2.2. There are 43 = 64 possible paths in
total.</p>
<p>As we consider each draw from the bag, some of these paths are
logically eliminated. The first draw tuned out to be , recall, so the
three white paths at the bottom of the garden are eliminated right away.
If you imagine the real data tracing out a path through the garden, it
must have passed through the one blue path near the origin. The second
draw from the bag produces , so three of the paths forking out of the
first blue marble remain. As the data trace out a path, we know it must
have passed through one of those three white paths (after the first blue
path), but we don’t know which one, because we recorded only the color
of each marble. Finally, the third draw is . Each of the remaining three
paths in the middle layer sustain one blue path, leaving a total of
three ways for the sequence ooe to appear, assuming the bag contains
[oooo]. Figure 2.3 shows the garden again, now with logically eliminated
paths grayed out. We can’tbe sure which of those three paths the actual
data took. But as long as we’re considering only the possibility that
the bag contains one blue and three white marbles, we can be sure that
the data took one of those three paths. Those are the only paths
consistent with both our knowledge of the bag’s contents (four marbles,
white or blue) and the data ( ).</p>
<p>This demonstrates that there are three (out of 64) ways for a bag
containing [oooo] to produce the data ooe . We have no way to decide
among these three ways. The infer- ential power comes from comparing
this count to the numbers of ways each of the other conjectures of the
bag’s contents could produce the same data. For example, consider the
conjecture [oooo]. There are zero ways for this conjecture to produce
the observed data, because even one is logically incompatible with it.
The conjecture [ ] is likewise logically incompatible with the data. So
we can eliminate these two conjectures, because neither provides even a
single path that is consistent with the data.</p>
<p>Figure 2.4 displays the full garden now, for the remaining three
conjectures: [oooo], [oooo], and [oooo]. The upper-left wedge displays
the same garden as Figure 2.3. The upper-right shows the analogous
garden for the conjecture that the bag contains three blue marbles and
one white marble. And the bottom wedge shows the garden for two blue</p>
<p>Figure 2.3. After eliminating paths inconsistent with the observed
se- quence, only 3 of the 64 paths remain.</p>
<p>and two white marbles. Now we count up all of the ways each
conjecture could produce the observed data. For one blue and three
white, there are three ways, as we counted already. For two blue and two
white, there are eight paths forking through the garden that are
logically consistent with the observed sequence. For three blue and one
white, there are nine paths that survive.</p>
<p>To summarize, we’ve considered five different conjectures about the
contents ofthe bag, ranging from zero blue marbles to four blue marbles.
For each of these conjectures, we’ve counted up how many sequences,
paths through the garden of forking data, could potentially produce the
observed data, ooo :</p>
<p>Conjecture Ways to produce ooo</p>
<p>[oooo] 0 × 4 × 0 = 0</p>
<p>[ ooo] 1 × 3 × 1 = 3</p>
<p>[oooo] 2 × 2 × 2 = 8</p>
<p>[oooo] 3 × 1 × 3 = 9</p>
<p>[ ] 4 × 0 × 4 = 0</p>
<p>Notice that the number of ways to produce the data, for each
conjecture, can be computed by first counting the number of paths in
each “ring” of the garden and then by multiplying these counts together.
This is just a computational device. It tells us the same thing as Fig-
ure 2.4, but without having to draw the garden. The fact that numbers
are multiplied during calculation doesn’t change the fact that this is
still just counting of logically possible paths. This point will come up
again, when you meet a formal representation of Bayesian inference.</p>
<p>So what good are these counts? By comparing these counts, we have
part of a solution for a way to rate the relative plausibility of each
conjectured bag composition. But it’s only a part ofa solution, because
in order to compare these counts we first have to decide how many ways
each conjecture could itself be realized. We might argue that when we
have no reason to assume otherwise, we can just consider each conjecture
equally plausible and compare the counts directly. But often we do have
reason to assume otherwise.</p>
<p>24</p>
<p>Figure 2.4. The garden of forking data, showing for each possible
compo- sition of the bag the forking paths that are logically compatible
with the data.</p>
<p>2.1.2. Combining other information. We may have additional
information about the rel- ative plausibility of each conjecture. This
information could arise from knowledge of how the contents ofthe bag
were generated. It could also arise from previous data. Whatever the
source, it would help to have a way to combine different sources of
information to update the plausibilities. Luckily there is a natural
solution: Just multiply the counts.</p>
<p>To grasp this solution, suppose we’re willing to say each conjecture
is equally plausible at the start. So we just compare the counts of ways
in which each conjecture is compatible with the observed data. This
comparison suggests that [oooo] is slightly more plausible than [oooo],
and both are about three times more plausible than [oooo]. Since these
are our initial counts, and we are going to update them next, let’s
label them prior.</p>
<p>Now suppose we draw another marble from the bag to get another
observation: . Now you have two choices. You could start all over again,
making a garden with four layers to trace out the paths compatible with
the data sequence oooo . Or you could take the previous counts—the prior
counts—over conjectures (0, 3, 8, 9, 0) and just update them in light of
the new observation. It turns out that these two methods are
mathematically identical, as long as the new observation is logically
independent of the previous observations.</p>
<p>Here’s how to do it. First we count the numbers of ways each
conjecture could produce the new observation, . Then we multiply each of
these new counts by the prior numbers of ways for each conjecture. In
table form:</p>
<p>Ways to Prior</p>
<p>Conjecture produce counts New count</p>
<p>[ ooo ] 0</p>
<p>0</p>
<p>0 × 0 = 0</p>
<p>[ ooo ] 1</p>
<p>3</p>
<p>3 × 1 = 3</p>
<p>[ oo ] 2</p>
<p>8</p>
<p>8 × 2 = 16</p>
<p>[oooo ] 3</p>
<p>9</p>
<p>9 × 3 = 27</p>
<p>[ooo ] 4</p>
<p>0</p>
<p>0 × 4 = 0</p>
<p>The new counts in the right-hand column above summarize all the
evidence for each conjec- ture. As new data arrive, and provided those
data are independent of previous observations, then the number of
logically possible ways for a conjecture to produce all the data up to
that point can be computed just by multiplying the new count by the old
count.</p>
<p>This updating approach amounts to nothing more than asserting that
(1) when we have previous information suggesting there are Wprior ways
for a conjecture to produce a previous observation Dprior and (2) we
acquire new observations Dnew that the same conjecture can produce in
Wnew ways, then (3) the number of ways the conjecture can account for
both Dprior as well as Dnew is just the product Wprior × Wnew . For
example, in the table above the conjecture [oooo] has Wprior = 8 ways to
produce Dprior = oo . It also has Wnew = 2 ways to produce the new
observation Dnew = . So there are 8 × 2 = 16 ways for the conjecture to
produce both Dprior and Dnew . Why multiply? Multiplication is just a
shortcut to enumerating and counting up all of the paths through the
garden that could produce all the observations.</p>
<p>In this example, the prior data and new data are of the same type:
marbles drawn from the bag. But in general, the prior data and new data
can be of different types. Suppose for example that someone from the
marble factory tells you that blue marbles are rare. So for every bag
containing [oooo], they made two bags containing [oooo] and three bags
containing [oooo]. They also ensured that every bag contained at least
one blue and one white marble. We can update our counts again:</p>
<p>Factory</p>
<p>Conjecture</p>
<p>Prior count</p>
<p>count</p>
<p>New count</p>
<p>[ ooo ] 0</p>
<p>0</p>
<p>0 × 0 = 0</p>
<p>[ ooo ] 3</p>
<p>3</p>
<p>3 × 3 = 9</p>
<p>[ oo ] 16</p>
<p>2</p>
<p>16 × 2 = 32</p>
<p>[oooo ] 27</p>
<p>1</p>
<p>27 × 1 = 27</p>
<p>[oooo ] 0</p>
<p>0</p>
<p>0 × 0 = 0</p>
<p>Now the conjecture [oooo] is most plausible, but barely better than
[oooo]. Is there a threshold difference in these counts at which we can
safely decide that one of the conjectures is the correct one? You’ll
spend the next chapter exploring that question.</p>
<p>2.1.3. From counts to probability. It is helpful to think of this
strategy as adhering to a principle of honest ignorance: When we don’t
know what caused the data, potential causes that may produce the data in
more ways are more plausible. This leads us to count paths through the
garden of forking data. We’re counting the implications of
assumptions.</p>
<p>It’s hard to use these counts though, so we almost always standardize
them in a way that</p>
<p>ransforms them into probabilities. Why is it hard to work with the
counts? First, since</p>
<p>relative value is all that matters, the size of the counts 3, 8, and
9 contain no information of</p>
<p>value. They could just as easily be 30, 80, and 90. The meaning would
be the same. It’s just</p>
<p>he relative values that matter. Second, as the amount of data grows,
the counts will very</p>
<p>quickly grow very large and become difficult to manipulate. By the
time we have 10 data</p>
<p>points, there are already more than one million possible sequences.
We’ll want to analyze</p>
<p>data sets with thousands of observations, so explicitly counting
these things isn’t practical.</p>
<p>Luckily, there’s a mathematical way to compress all of this.
Specifically, we define the</p>
<p>updated plausibility of each possible composition of the bag, after
seeing the data, as:</p>
<p>plausibility of [oooo] after seeing ooo</p>
<p>∝</p>
<p>ways [oooo] can produce ooo</p>
<p>×</p>
<p>prior plausibility [oooo]</p>
<p>That little ∝ means proportional to. We want to compare the
plausibility of each possible bag composition. So it’ll be helpful to
define p as the proportion of marbles that are blue. For</p>
<p>[oooo], p = 1/4 = 0.25. Also let Dnew = ooo . And now we can
write:</p>
<p>plausibility of p after Dnew Ⅸ ways p can produce Dnew × prior
plausibility of p</p>
<p>The above just means that for any value p can take, we judge the
plausibility of that value p as proportional to the number of ways it
can get through the garden of forking data. This expression just
summarizes the calculations you did in the tables ofthe previous
section.</p>
<p>Finally, we construct probabilities by standardizing the plausibility
so that the sum of the plausibilities for all possible conjectures will
be one. All you need to do in order to stan- dardize is to add up all of
the products, one for each value p can take, and then divide each
product by the sum of products:</p>
<p>ways p can produce Dnew × prior plausibility p</p>
<p>sum of products</p>
<p>A worked example is needed for this to really make sense. So consider
again the table from before, now updated using our definitions ofp and
“plausibility”:</p>
<p>Ways to</p>
<p>Possible composition p produce data Plausibility</p>
<p>[ oo] 0</p>
<p>[ oo] 0.25 3</p>
<p>[ oo] 0.5 8</p>
<p>[ooo]</p>
<p>You can quickly compute these plausibilities in R:</p>
<p>[1] 0.00 0.15 0.40 0.45 0.00</p>
<p>The values in ways are the products mentioned before. And sum(ways)
is the denominator “sum of products” in the expression near the top of
the page.</p>
<p>These plausibilities are also probabilities—they are non-negative
(zero or positive) real numbers that sum to one. And all of the
mathematical things you can do with probabilities you can also do with
these values. Specifically, each piece of the calculation has a direct
partner in applied probability theory. These partners have stereotyped
names, so it’s worth learning them, as you’ll see them again and
again.</p>
<p>• A conjectured proportion of blue marbles, p, is usually called a
parameter value. It’s just a way of indexing possible explanations ofthe
data.</p>
<p>• The relative number of ways that a value p can produce the data is
usually called a likelihood. It is derived by enumerating all the
possible data sequences that could have happened and then eliminating
those sequences inconsistent with the data.</p>
<p>• The prior plausibility of any specific p is usually called the
prior probability.</p>
<p>• The new, updated plausibility of any specific p is usually called
the posterior probability.</p>
<p>In the next major section, you’ll meet the more formal notation for
these objects and see how they compose a simple statistical model.</p>
<p>Rethinking: Randomization. When you shuffle a deck of cards or assign
subjects to treatments by flipping a coin, it is common to say that the
resulting deck and treatment assignments are randomized. What does it
mean to randomize something? It just means that we have processed the
thing so that we know almost nothing about its arrangement. Shuffling a
deck of cards changes our state of knowledge, so that we no longer have
any specific information about the ordering of cards. However, the bonus
that arises from this is that, if we really have shuffled enough to
erase any prior knowledge of the ordering, then the order the cards end
up in is very likely to be one of the many orderings with high
information entropy. The concept of information entropy will be
increasingly important as we progress, and will be unpacked in Chapters
7 and 10.</p>
<h6 id="阅读日期-2025年12月06日-2025年12月06日-共-1-天">阅读日期：
2025年12月06日-2025年12月06日 共： 1 天</h6>
<script src="https://giscus.app/client.js"
        data-repo="hbaolong/hbaolong.github.io"
        data-repo-id="R_kgDOLetDQg"
        data-category="General"
        data-category-id="DIC_kwDOLetDQs4CfLEl"
        data-mapping="url"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="1"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
</body>
</html>
